#+title: TODOs
#+filetags: :IODefl:


* Design

- Separação entre variáveis globais de customização  e funções
- Cada categoria de plot deve ser gerado por funções diferentes
  - Facilita debugar e (futuramente) empacotar
  - Cada função deve conseguir gerar outputs isolados
    - Primeiro precisamos definir quais resultados vamos mostrar para gerar os PDFs/svgs, etc
- Funções principais:
  - =prepare_data= :: Similar ao script que gera dados escalares
    - Principal diferença é que estou gerando algumas outras inforações
  - =decompose_growth= :: Calcula a decomposição do crescimento a partir de diferentes methodologias
  - =group_plots= :: gera os relatórios individualizados em PDF
    - Essa função deve funcionar tanto para países em isolados quanto em grupos de países
      - É considerado um grupo se o respectivo item da lista tiver mais de uma observação
      - Os gráficos são diferentes se gerados para grupos ou não
        - Em geral, os gráficos de países isolados são mais detalhados



* Planned, but not implemented

** TODO Incluir compilação das matrizes no pipeline

- Se conseguirmos gerar tudo de forma standalone (incluindo baixar xmls), tornamos mais reprodutível




** WAIT Scatter plot matrices
** NO GDP vs Contribution and geom path for time

- This might be a way to show ciclicality of components



* FIXMEs [56%]

** DONE [#A] Contribuição do setor externo (CDX e X) não está correta

- CDX a partir do método das exportações líquidas e do método da atribuição coincidem

** DONE [#B] Defini um limitador para a variação de estoques nos boxplots

- Isso porque é o componente com maior variabilidade, distorcendo os eixos se deixado sem o limitador
  - Uma alternativa seria colocar como um subplot dentro do plot principal
- Para alguns países, o limitador é muito baixo, fazendo com que apenas a parte da cauda inferior esteja visível

** DONE [#C] Gráficos de área tem partes transparentes na presença de valores negativos
** TODO [#C] Adicionar espaçamento entre os gráficos de barra para melhor visibilidade

** TODO [#A] Revisar cálculo CDX e CDD :@Gabriel:


** DONE Exportar gráficos

** DONE Corrigir cores dos gráficos exportados

** TODO [#A] Exportar tabelas
** DONE [#C] Cat the country to be displayed
** DONE [#B] Criar boxplot da diferença entre os métodos a cada variável
** DONE Mudar target method
** DONE Add Avg and SD for calculate metrics
** TODO [#C] Add footnote for Avg and SD
It should indicate that these variables are not in comparisson with target variable
** TODO [#A] Decide if remove the normalization of the comparative table

One easy way to implement is to set it to FALSE

** DONE [#A] Only generate diffs plots for the target method

** DONE Verificar taxa de crescimento médio com texto do Bacarro :@Gabriel:
- Em especial, Vietnam
- Checar novamente depois dos ajustes na taxa de câmbio

** WAIT Verificar taxa câmbio :@Doug:

- Talvez existam distorções na taxa de câmbio
  - Idealmente, deveria utilizar a mesma taxa de câmbio utilizada pelo Bacarro
    - Ainda melhor, seria o caso de utilizar a mesma base da OECD
      - Não está disponível na release anterior das matrizes


** DONE Remove inventories from plots
** DONE Set free y

** TODO Criar gráfico exportação para todos os métodos e exportações líquidas para net exports :@Gabriel:

** TODO Criar gráfico com mudança do conteúdo importado

- São os termos negativos nas identidades


** TODO Selecionar países

** STRT Gerar org com todas as figuras a serem incluídas no google drive

* FIXME List

#+BEGIN_SRC shell :dir ./code :exports results :results raw
grep -n "FIXME" *.R | while IFS=: read -r file line comment; do
    echo "- [[file:./code/$file::${line}]][Line ${line}] :: ${comment#*FIXME}"
done
#+END_SRC

#+RESULTS:
- [[file:./code/deflate_tables.R::82]][Line 82] ::
- [[file:./code/generate_reports.R::2]][Line 2] :: : Adjust the call to compile the databse
- [[file:./code/support_functions.R::482]][Line 482] :: : There might be some errors with the input data and with the area plot as well
- [[file:./code/support_functions.R::515]][Line 515] :: : Add GDP growth?
- [[file:./code/support_functions.R::644]][Line 644] ::  Table of import coeficients?
- [[file:./code/support_functions.R::894]][Line 894] :: : Increase the space between groups
- [[file:./code/support_functions.R::1042]][Line 1042] :: : Add as another table
- [[file:./code/support_functions.R::1113]][Line 1113] :: : Format the numbers
- [[file:./code/support_functions.R::1125]][Line 1125] :: : Check if there is a way to post remove the Normalize
- [[file:./code/support_functions.R::1141]][Line 1141] :: : Define a grouping scheme if countries > 1
- [[file:./code/support_functions.R::1273]][Line 1273] :: : Aparently, it is not working
- [[file:./code/tmp.R::290]][Line 290] :: : Creates a wrapper that gets from the csv subbolfolder
- [[file:./code/tmp.R::364]][Line 364] :: : Creates a wrapper that gets from the csv subbolfolder
